@use "@/styles/colors/radix-colors" as *;
@use "@/styles/mixins/glass" as glass;

/* Menu radius system (smooth nesting) */
$content-radius: 14px;
$content-pad: 6px;
$item-radius: calc(#{$content-radius} - #{$content-pad});

@mixin triggerCapsule {
  /* trigger matches nav capsule approach, but uses its own radius values */
  position: relative;
  background: transparent;
  border: 0;
  outline: none;

  &::before {
    content: "";
    position: absolute;
    inset: 6px 6px;
    border-radius: 10px;
    pointer-events: none;

    opacity: 0;
    background: cA(mono, 2);
    box-shadow: inset 0 1px 0 cA(mono, 4);

    transition: opacity 140ms ease, background 140ms ease, box-shadow 140ms ease;
  }

  &:hover::before {
    opacity: 1;
    background: cA(mono, 3);
    box-shadow: inset 0 1px 0 cA(mono, 5);
  }

  &:active::before {
    opacity: 1;
    background: cA(mono, 4);
    box-shadow: inset 0 1px 0 cA(mono, 5);
  }

  &:focus-visible {
    outline: 2px solid c(accent, $radix-border-hover);
    outline-offset: 2px;
  }

  &:focus-visible::before {
    opacity: 1;
    background: cA(mono, 3);
    box-shadow: inset 0 1px 0 cA(mono, 5);
  }
}

.trigger {
  appearance: none;

  height: 48px;
  min-width: 48px;
  padding: 0 10px;
  border-radius: 12px;

  display: inline-flex;
  align-items: center;
  justify-content: center;

  color: c(mono, $radix-text);
  cursor: pointer;

  @include triggerCapsule;

  > * {
    position: relative;
    z-index: 1;
  }
}

.content {
  @include glass.glassPanel;

  min-width: 220px;
  padding: $content-pad;
  border-radius: $content-radius;
  display: flex;
  flex-direction: column;
  gap: 0.25rem;
}

.menuItem {
  border-radius: $item-radius;
  outline: none;
}

.menuLink {
  display: flex;
  align-items: center;

  min-height: 48px;
  padding: 0 10px;
  border-radius: $item-radius;

  text-decoration: none;
  color: c(mono, $radix-text);

  background: transparent;
  border: 1px solid transparent;

  transition: background 120ms ease, border-color 120ms ease,
    box-shadow 120ms ease;

  &:hover {
    background: cA(mono, 3);
    border-color: cA(mono, 6);
    box-shadow: inset 0 1px 0 cA(mono, 4);
  }

  &:focus-visible {
    outline: 2px solid c(accent, $radix-border-hover);
    outline-offset: 2px;
  }

  &[aria-current="page"] {
    background: cA(mono, 3);
    border-color: cA(mono, 6);
    box-shadow: inset 0 1px 0 cA(mono, 4);
    font-weight: 650;
  }
}

/* data-highlighted matches hover visuals (Radix uses it for pointer + keyboard) */
.menuItem[data-highlighted] .menuLink {
  background: cA(mono, 3);
  border-color: cA(mono, 6);
  box-shadow: inset 0 1px 0 cA(mono, 4);
}
